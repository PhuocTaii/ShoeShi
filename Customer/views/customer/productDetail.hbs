<div class='container-fluid'>
  <div class='detail-container overflow-hidden'>
    <div class='row mx-0 img-detail'>
      <div class='col-8 px-0'>
        <div class='product-img'>
          <div id='carousel-product-image' class='carousel slide'>
            <div class='carousel-indicators'>
              {{#each details.productImage}}
              <button
                type='button'
                data-bs-target='#carousel-product-image'
                data-bs-slide-to='{{@index}}'
                class='active'
                aria-current='true'
                aria-label='Slide {{@index}}'
              ></button>
              {{/each}}
            </div>
            <div id="carousel-images" class='carousel-inner'>
              {{#each details.productImage}}
              <div class='carousel-item'>
                <img
                  class='product-image'
                  src={{this}}
                />
              </div>
              {{/each}}
            </div>
            <button
              class='carousel-control-prev'
              type='button'
              data-bs-target='#carousel-product-image'
              data-bs-slide='prev'
            >
              <span
                class='carousel-control-prev-icon'
                aria-hidden='true'
              ></span>
              <span class='visually-hidden'>Previous</span>
            </button>
            <button
              class='carousel-control-next'
              type='button'
              data-bs-target='#carousel-product-image'
              data-bs-slide='next'
            >
              <span
                class='carousel-control-next-icon'
                aria-hidden='true'
              ></span>
              <span class='visually-hidden'>Next</span>
            </button>
          </div>
        </div>
      </div>
      <div class='col-4 px-0'>
        <div id="main-product-detail" class='product-detail'>
          <div class='name-price'>
            <p class='product-name'>{{details.name}}</p>
            <p class='product-price'><span data-price={{details.price}}></span> đ</p>
          </div>
          <div class='color'>
            <p class='attribute-name'>Color</p>
            <div class='color-options'>
              {{#each details.color}}
              <input
                type='radio'
                id='{{this._id}}'
                name='color-option'
                class='option'
              />
              <label class="color-present" for='{{this._id}}' style="background-color: {{this.colorCode}};">
                <i class='ri-check-line'></i>
              </label>
              {{/each}}
            </div>
          </div>
          <div class='size'>
            <p class='attribute-name'>Sizes</p>
            <div class='size-options'>
              {{#each details.size}}
              <input
                type='radio'
                id='{{this._id}}'
                name='size-option'
                class='option'
              />
              <label for='{{this._id}}' class='s-option'>
                {{this.size}}
              </label>
              {{/each}}
            </div>
          </div>
          <button class='add-button'>
            <p class='add-action'>add to cart</p>
          </button>
        </div>
      </div>
    </div>
  </div>
  <div class='review-container overflow-hidden'>
    <div class='row mx-0 view-make'>
      <div class='col-8 px-0'>
        <div class='review-view'>
          <div class='review-header'>
            <p class='r-header'>reviews
              <span data-total-reviews={{details.totalReviews}} class='review-amount'>({{details.totalReviews}})</span></p>
          </div>
          
          <div class='review show'>
            <div id='review-page'>
              {{#each details.review}}
              {{#if this._id}}
              <div id={{this._id}} class='r-review' data-rating={{this.rating}}>
                <p class='r-topic'>{{this.tittle}}</p>
                <div class='r-rating'>
                  <span class='rating-star'>&#9733</span>
                  <span class='rating-star'>&#9733</span>
                  <span class='rating-star'>&#9733</span>
                  <span class='rating-star'>&#9733</span>
                  <span class='rating-star'>&#9733</span>
                </div>
                <p class='r-content'>{{this.content}}</p>
                <p class='r-reviewer'>{{this.reviewer}} | {{this.reviewTime}}</p>
              </div>
              {{/if}}
              {{/each}}
            </div>
          </div>

          {{#if totalPages}}
          <nav aria-label='LinkToReviewPages'>
            <ul id="review-pagination" class='pagination' data-total-pages={{totalPages}} data-active-page={{activePage}}>
              
            </ul>
          </nav>
          {{/if}}
        </div>
      </div>
      <div class='col-4 px-0'>
        <form class='review-form' id='review-form' onsubmit="sendReview(event)">
          <p class='form-header'>Write a review</p>
          <div class='f-rating'>
            <p class='form-tittle'>Rating</p>
            <div name="rating" class='rating' onmousemove='rate(event)'>
              <span class='rating-star'>&#9733</span>
              <span class='rating-star'>&#9733</span>
              <span class='rating-star'>&#9733</span>
              <span class='rating-star'>&#9733</span>
              <span class='rating-star'>&#9733</span>
            </div>
          </div>
          <div class='f-review-tittle'>
            <p class='form-tittle'>Review tittle</p>
            <input
              type='text'
              id='review-tittle'
              name='title'
              class='input-text'
              required
            />
          </div>
          <div class='f-review-content'>
            <p class='form-tittle'>Your review</p>
            <textarea
              type='text'
              id='review-content'
              name='content'
              class='input-text'
              rows='4'
              required
            ></textarea>
          </div>
          <button class='f-review-button' type="submit">submit</button>
        </form>
      </div>
    </div>
  </div>
  <div class='other-products-container overflow-hidden'>
    <p class='others-tittle'>you might also like</p>
    <div id='carouselOther-products' class='carousel slide'>
      {{!-- <div class='carousel-indicators'>
        <button
          type='button'
          data-bs-target='#carouselOther-products'
          data-bs-slide-to='0'
          class='active'
          aria-current='true'
          aria-label='Slide 1'
        ></button>
      </div> --}}
      <div class='carousel-inner'>
        <div class='carousel-item active'>
          <div class='product-container'>
            {{#each relatedProducts}}
            <a class='product' href="/product/{{this._id}}">
              <img class='product-img' src={{this.productImage.[0]}} />
              <div class='product-details'>
                <p class='product-name'>{{this.name}}</p>
                <p class='product-brand'>{{this.manufacturer.name}}</p>
                <p class='product-price'>{{this.price}} ₫</p>
              </div>
            </a>
            {{/each}}
          </div>
        </div>
      </div>
      {{!-- <button
        class='carousel-control-prev'
        type='button'
        data-bs-target='#carouselOther-products'
        data-bs-slide='prev'
      >
        <span class='carousel-control-prev-icon' aria-hidden='true'></span>
        <span class='visually-hidden'>Previous</span>
      </button>
      <button
        class='carousel-control-next'
        type='button'
        data-bs-target='#carouselOther-products'
        data-bs-slide='next'
      >
        <span class='carousel-control-next-icon' aria-hidden='true'></span>
        <span class='visually-hidden'>Next</span>
      </button> --}}
    </div>
  </div>
</div>

<script
  src='https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js'
></script>
<script src='/js/pagination.js'></script>
<script src='/js/rating-star.js'></script>
<script src='/js/format-currency.js'></script>
<script src='/js/product-detail.js'></script>